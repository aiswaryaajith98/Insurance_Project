<!DOCTYPE html>
<html lang="en">
{% load static %}

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Insurance</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

 

  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
  <link href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/boxicons/css/boxicons.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/quill/quill.snow.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/quill/quill.bubble.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/remixicon/remixicon.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/simple-datatables/style.css' %}" rel="stylesheet">
  <link href="{% static 'css/style.css' %}" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.19.0/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.19.0/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />



</head>
<style>
    
    body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        font-family: 'Pacifico',cursive;
        overflow-x: hidden;
    }
    .sidebar {
        color: white;
        width: 250px; 
    }
    .navbar {
        background-color: #ffffff;
        overflow: hidden;
        padding: 20px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }
    .header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 1000;
        background-color: #fff; 
    }

    .main {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin-bottom: -110px; 
        
    }
   
    .table {
    width: 100%;
    border-collapse: collapse;
}

.table th {
    background-color: #f2f2f2;
    color: #333;
    font-weight: bold;
    padding: 10px;
    text-align: left;
    border-bottom: 1px solid #ddd;
}

.table tbody tr {
    border-bottom: 1px solid #ddd;
}

.table td {
    padding: 10px;
}

.table td img {
    width: 50px;
    border-radius: 50%;
}

.table td a {
    color: blue;
    text-decoration: none;
}

.table tbody tr:hover {
    background-color: #f5f5f5;
}

.icon-container {
            flex-direction: column;
           
            margin-top: -100px; 
            text-align: center;
           
            
        }
        .icon-container div {
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        .icon-container div i {
            font-size: 30px;

        }
        .icon-container div:nth-child(1) i {
            margin-top: 120px;
            color:#ffffff;
        }
        .icon-container div:nth-child(2) i {
            color: #ffffff;
        }
        .icon-container div:nth-child(3) i {
            color:#ffffff;
        }
        .icon-container div:nth-child(4) i {
            color: #ffffff;
        }
        .icon-container div:nth-child(5) i {
            color: #ffffff;
        }
        .icon-container div:hover {
            transform: scale(1.1);
           
            
        }
        .icon-container div:hover i {
            color: #7d9dbd; 
        }
        .icon-container div {
            padding: 10px;
            border-radius: 5px;
        }
        .icon-container div.active i {
            color: #7a9cbd;
        }

        .rounded-logo {
            width: 40px;
            height: 40px;
            border-radius: 50%; 
        }

@media screen and (max-width: 575px) {
  body {
    font-size: 14px;
  
  }
  
  .main{
    margin-bottom: 190px;
    
  }
  
 
  .header {
   
    padding: 10px;
  }

  .table th, .table td {

    overflow: hidden;
    text-overflow: ellipsis;
    padding: 5px;
    font-size: 8px;
  }

  .table td img {
    
    width: 30px;
  }
}

@media only screen and (min-width: 768px) and (max-width: 1024px) {
    body {
        overflow-y: hidden;
    }

    .main{
        margin-bottom: 180px;
    }

}
</style>
<body>
    <header id="header" class="header fixed-top d-flex align-items-center">

        <div class="d-flex align-items-center justify-content-between">
          <a href="Company_Dashboard.html" class="logo d-flex align-items-center">
            <img src="{% static 'images/icon.jpg' %}" alt="Company Logo" class="rounded-logo">
            <span class="d-none d-lg-block">ProtecSure</span>
          </a>
          <i class="bi bi-list toggle-sidebar-btn"></i>
        </div>
    
        <div class="search-bar">
          <form class="search-form d-flex align-items-center" method="POST" action="#">
            <input type="text" name="query" placeholder="Search" title="Enter search keyword">
            <button type="submit" title="Search"><i class="bi bi-search"></i></button>
          </form>
        </div>
    
        <nav class="header-nav ms-auto">
          <ul class="d-flex align-items-center">
    
            <li class="nav-item d-block d-lg-none">
              <a class="nav-link nav-icon search-bar-toggle " href="#">
                <i class="bi bi-search"></i>
              </a>
            </li>
    
    
            <li class="nav-item dropdown">
              <a class="nav-link nav-icon" href="#" data-bs-toggle="dropdown">
                <i class="bi bi-bell"></i>
                <span class="badge bg-primary badge-number">4</span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow notifications">
                <li class="dropdown-header">
                    You have 4 new CRM notifications
                    <a href="#"><span class="badge rounded-pill bg-primary p-2 ms-2">View all</span></a>
                </li>
                <li>
                    <hr class="dropdown-divider">
                </li>
    
              <li class="notification-item">
                  <i class="bi bi-exclamation-circle text-warning"></i>
                  <div>
                      <h4>New Lead Assigned</h4>
                      <p>A new lead has been assigned to you. Please review and follow up.</p>
                      <p>30 min. ago</p>
                  </div>
              </li>
              
                <li class="notification-item">
                    <i class="bi bi-exclamation-circle text-warning"></i>
                    <div>
                        <h4>New Lead Assigned</h4>
                        <p>A new lead has been assigned to you. Please review and follow up.</p>
                        <p>30 min. ago</p>
                    </div>
                </li>
            
                <li>
                    <hr class="dropdown-divider">
                </li>
            
                <li class="notification-item">
                    <i class="bi bi-x-circle text-danger"></i>
                    <div>
                        <h4>Task Deadline Missed</h4>
                        <p>The deadline for a task has passed. Take necessary actions.</p>
                        <p>1 hr. ago</p>
                    </div>
                </li>
            
                <li>
                    <hr class="dropdown-divider">
                </li>
            
                <li class="notification-item">
                    <i class="bi bi-check-circle text-success"></i>
                    <div>
                        <h4>Deal Closed</h4>
                        <p>Congratulations! A deal has been successfully closed.</p>
                        <p>2 hrs. ago</p>
                    </div>
                </li>
            
                <li>
                    <hr class="dropdown-divider">
                </li>
            
                <li class="notification-item">
                    <i class="bi bi-info-circle text-primary"></i>
                    <div>
                        <h4>Meeting Reminder</h4>
                        <p>You have a scheduled meeting in the next hour. Be prepared!</p>
                        <p>4 hrs. ago</p>
                    </div>
                </li>
            
                <li>
                    <hr class="dropdown-divider">
                </li>
                <li class="dropdown-footer">
                    <a href="#">Show all CRM notifications</a>
                </li>
            </ul>
            </li>
    
            <li class="nav-item dropdown">
    
              <a class="nav-link nav-icon" href="#" data-bs-toggle="dropdown">
                <i class="bi bi-chat-left-text"></i>
                <span class="badge bg-success badge-number">3</span>
              </a>
    
              <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages">
                <li class="dropdown-header">
                    You have 3 new CRM messages
                    <a href="#"><span class="badge rounded-pill bg-primary p-2 ms-2">View all</span></a>
                </li>
                <li>
                    <hr class="dropdown-divider">
                </li>
            
                <li class="message-item">
                    <a href="#">
                        <img src="{% static 'img/message-1.jpg' %}" alt="" class="rounded-circle">
                        <div>
                            <h4>New Lead Inquiry</h4>
                            <p>Maria Hudson is interested in your product. Contact her for more details.</p>
                            <p>4 hrs. ago</p>
                        </div>
                    </a>
                </li>
                <li>
                    <hr class="dropdown-divider">
                </li>
            
                <li class="message-item">
                    <a href="#">
                        <img src="{% static 'img/message-2.jpg' %}" alt="" class="rounded-circle">
                        <div>
                            <h4>Task Update</h4>
                            <p>Anna Nelson has provided an update on the ongoing task. Review the changes.</p>
                            <p>6 hrs. ago</p>
                        </div>
                    </a>
                </li>
                <li>
                    <hr class="dropdown-divider">
                </li>
            
                <li class="message-item">
                    <a href="#">
                        <img src="{% static 'img/message-3.jpg' %}" alt="" class="rounded-circle">
                        <div>
                            <h4>Meeting Confirmation</h4>
                            <p>David Muldon has confirmed the upcoming meeting. Prepare the agenda.</p>
                            <p>8 hrs. ago</p>
                        </div>
                    </a>
                </li>
                <li>
                    <hr class="dropdown-divider">
                </li>
            
                <li class="dropdown-footer">
                    <a href="#">Show all CRM messages</a>
                </li>
            </ul>
            </li>
    
            <li class="nav-item dropdown pe-3">
    
              <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
                <img src="{% static 'images/edit.jpg' %}" alt="Profile" class="rounded-circle">
                <span class="d-none d-md-block dropdown-toggle ps-2">Admin</span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
                <li class="dropdown-header">
                  <h6>Admin</h6>
                  <span>Insurance Admin</span>
                </li>
                <li>
                  <hr class="dropdown-divider">
                </li>
    
                <li>
                  <a class="dropdown-item d-flex align-items-center" href="">
                    <i class="bi bi-person"></i>
                    <span>My Profile</span>
                  </a>
                </li>
                <li>
                  <hr class="dropdown-divider">
                </li>
    
                <li>
                  <a class="dropdown-item d-flex align-items-center" href="">
                    <i class="bi bi-gear"></i>
                    <span>Account Settings</span>
                  </a>
                </li>
                <li>
                  <hr class="dropdown-divider">
                </li>
    
                <li>
                  <a class="dropdown-item d-flex align-items-center" href=#>
                    <i class="bi bi-question-circle"></i>
                    <span>Need Help?</span>
                  </a>
                </li>
                <li>
                  <hr class="dropdown-divider">
                </li>
    
                <li>
                  <a class="dropdown-item d-flex align-items-center" href="#">
                    <i class="bi bi-box-arrow-right"></i>
                    <span>Sign Out</span>
                  </a>
                </li>
    
              </ul>
            </li>
    
          </ul>
        </nav>
      </header>


    <aside id="sidebar" class="sidebar">
        <div class="icon-container">
          <div id="homeIcon"  onclick="chooseIcon(this)">
              <i class="bi bi-grid"></i> 
          </div>
          <br>
          <div onclick="chooseIcon(this)">
              <i class="bi bi-journal-text"></i> 
          </div>
          <br>
          <div onclick="chooseIcon(this)">
              <i class="bi bi-person-plus"></i> 
          </div>
          <br>
          <div onclick="chooseIcon(this)" class="active">
              <i class="bi bi-eye"></i> 
          </div>
          <br> 
          <div onclick="chooseIcon(this)">
              <i class="bi bi-box-arrow-in-right"></i>
          </div> 
          <br>
          
      </div>
       
        
    </aside>
   
    <main id="main" class="main">

        <div class="row" id="agent-container">
           
        </div>

    

    </main>
  
    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'vendor/chart.js/chart.umd.js' %}"></script>
  <script src="{% static 'vendor/echarts/echarts.min.js' %}"></script>
  <script src="{% static 'vendor/quill/quill.min.js' %}"></script>
  <script src="{% static 'vendor/simple-datatables/simple-datatables.js' %}"></script>
  <script src="{% static 'vendor/tinymce/tinymce.min.js' %}"></script>
  <script src="{% static 'vendor/php-email-form/validate.js' %}"></script>
  <script src="{% static 'vendor/apexcharts/apexcharts.min.js' %}"></script>
  <script src="{% static 'js/main.js' %}"></script>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('active');
    }
    document.querySelector('.toggle-sidebar-btn').addEventListener('click', toggleSidebar);
</script>
<script>
  var selectedIcon = null;

  function chooseIcon(element) {
      if (selectedIcon) {
          selectedIcon.classList.remove('active');
      }
      element.classList.add('active');
      selectedIcon = element;

      var iconClass = element.querySelector('i').classList;

      switch (true) {
          case iconClass.contains('bi-grid'):
              window.location.href = "{% url 'Company_Dashboard' %}";
              break;
          case iconClass.contains('bi-journal-text'):
              window.location.href = "{% url 'Company_AssignAgent' %}";
              break;
          case iconClass.contains('bi-person-plus'):
              window.location.href = "{% url 'Company_AddAgent' %}";
              break;
          case iconClass.contains('bi-eye'):
              window.location.href = "{% url 'Company_AgentDetails' %}";
              break;
          case iconClass.contains('bi-box-arrow-in-right'):
              window.location.href = "{% url 'index' %}";
              break;
          default:
              break;
      }
  }
</script>

<script>
    // Simulated agent data
    var agent = {
        name: "Varun Dev",
        locations: [
            { location: "New York", lastSeen: "Just now", lat: 40.7128, lng: -74.0060 },
            { location: "Los Angeles", lastSeen: "2 minutes ago", lat: 34.0522, lng: -118.2437 },
            { location: "Chicago", lastSeen: "5 minutes ago", lat: 41.8781, lng: -87.6298 }
            // Add more locations if needed
        ]
    };

    // Function to create agent card
    function createAgentCard(agent) {
        var card = '';
        agent.locations.forEach(function(location) {
            card += `<div class="col-md-4 mb-3">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">${agent.name}</h5>
                                <p class="card-text">Location: <span class="agent-location">${location.location}</span></p>
                                <p class="card-text">Last Seen: <span class="last-seen">${location.lastSeen}</span></p>
                                <div id="map-${location.location}" class="map"></div>
                                <button class="btn btn-primary" onclick="refreshAgentLocation('${agent.name}', '${location.location}')">Refresh Location</button>
                            </div>
                        </div>
                    </div>`;
        });
        return card;
    }

    // Function to refresh agent location (simulated)
    function refreshAgentLocation(agentName, location) {
        // Simulate updating agent location
        var newLocation = "Some new location";
        var newLastSeen = "Just now";

       // Update UI
        $(`.card-title:contains('${agentName}')`).siblings('.card-body').find('.agent-location:contains("${location}")').text(newLocation);
        $(`.card-title:contains('${agentName}')`).siblings('.card-body').find('.last-seen:contains("${location}")').text(newLastSeen);

    }

    // Initialize agent card
    $(document).ready(function() {
        $('#agent-container').append(createAgentCard(agent));

        // Initialize maps
        agent.locations.forEach(function(location) {
            var map = L.map(`map-${location.location}`).setView([location.lat, location.lng], 13);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: 'Map data © <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'
            }).addTo(map);
            L.marker([location.lat, location.lng]).addTo(map)
                .bindPopup(`${agent.name}<br>${location.location}`)
                .openPopup();
        });
    });


</script>

</body>
</html>